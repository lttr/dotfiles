" Documentation: https://github.com/JetBrains/ideavim 

" vim: set ft=vim:


" ===== Settings =====
set hlsearch
set ignorecase
set incsearch
set smartindent
set autoindent
set smartcase
set nolist
set number
set autochdir
set scrolloff=1
set noexpandtab
set tabstop=4
set shiftwidth=4

" ===== Plugins =====
set surround

" ===== Code style =====
nnoremap ,f :action ReformatCode<CR>

" ===== Consistency =====
nnoremap Y y$
vnoremap p "_dgP
nnoremap s "_diwP
vnoremap < <gv
vnoremap > >gv

" ===== Editing =====
nnoremap <space>; m`A;<esc>``
nnoremap <space>, m`A,<esc>``

" ===== Searching and replacing =====
" Visual search and Save search for later n. usage = multiple renaming
" Even more powerful with cgn = change next occurance, than
nnoremap gr /\V\<<C-r><C-w>\><CR><C-o>:set hlsearch<CR>
vnoremap gr y/\V<C-r>"<CR><C-o>:set hlsearch<CR>gvho
nnoremap gR /\V\<<C-r><C-w>\><CR><C-o>:set hlsearch<CR>viwo
nnoremap gy /\V<C-r><C-w><CR><C-o>:set hlsearch<CR>viwc
vnoremap gy y/<C-r>"<CR>:set hls<CR>gvhc
" Go substitute
vnoremap gs y:%s#<C-r>"##g<Left><Left>
" Go substitute word
nnoremap gss :set hls<CR>/\V\<<C-r><C-w>\><CR>:%s#\<<C-r><C-w>\>##g<Left><Left>
" Go count occurances
noremap gC m`:%s///gn<CR>``
" Go find from clipboard
noremap gB /<C-r>*<CR>:set hlsearch<CR>:echo "Search from clipboard for: ".@/<CR>
" Go find from yank register
noremap g/ /\V<C-r>"<CR>:set hlsearch<CR>:echo "Search from yank for: ".@/<CR>

nnoremap gV `[v`]

" ===== Moving =====
nnoremap g; :action JumpToLastChange<CR>
 
" ===== Navigation =====
nnoremap <c-o> :action Back<CR>
nnoremap <c-i> :action Forward<CR>
nnoremap ]e :action GotoNextError<CR>
nnoremap [e :action GotoPreviousError<CR>
nnoremap g<c-o> <c-o>
nnoremap g<c-i> <c-i>

" ===== Source =====
nnoremap gcc :action CommentByLineComment<CR>
vnoremap gc :action CommentByLineComment<CR>

" ===== Unimpaired functionality =====
nnoremap ]b gt
nnoremap [b gT
nnoremap [<space> O<esc>j
nnoremap ]<space> o<esc>k
nnoremap [q :action PreviousOccurence<CR>
nnoremap ]q :action NextOccurence<CR>
nnoremap [m :action MethodUp<CR>
nnoremap ]m :action MethodDown<CR>
nnoremap [c :action VcsShowPrevChangeMarker<CR>
nnoremap ]c :action VcsShowNextChangeMarker<CR>
nnoremap coh :nohlsearch<CR>
nnoremap col :action EditorToggleShowWhitespaces<CR>
nnoremap cor :set<space>relativenumber!<CR>
nnoremap cow :action EditorToggleUseSoftWraps<CR>

" ===== Windows =====
nnoremap ,s :action SplitHorizontally<CR>
nnoremap ,v :action SplitVertically<CR>
nnoremap ,q :action CloseContent<CR>

