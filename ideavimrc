" Documentation: https://github.com/JetBrains/ideavim 

" vim: set ft=vim:


" ===== Settings =====
set hlsearch
set ignorecase
set incsearch
set smartindent
set autoindent
set smartcase
set nolist
set number
set autochdir
set scrolloff=1
set noexpandtab
set tabstop=4
set shiftwidth=4

" ===== Plugins =====
set surround

" ===== Code style =====
nnoremap ,f :action ReformatCode<CR>

" ===== Consistency =====
nnoremap Y y$
vnoremap p "_dgP
nnoremap s "_diwP
vnoremap < <gv
vnoremap > >gv

" ===== Editing =====
nnoremap <space>; m`A;<esc>``
nnoremap <space>, m`A,<esc>``

" ===== Searching and replacing =====

" Highlight current word and all same words (or selections)
nnoremap gr yiw/\V\C\<<C-r>"\><CR><C-o>:set hls<CR>
vnoremap gr y/\V\C<C-r>"<CR><C-o>:set hls<CR>gvo
" Case insensitive
nnoremap gR yiw/\V\c\<<C-r>"\><CR><C-o>:set hls<CR>
vnoremap gR y/\V\c<C-r>"<CR><C-o>:set hls<CR>gvo

" Change current word (or selection) and then every following one
nnoremap gy yiw/\V\C<C-r>"<CR><C-o>:set hls<CR>cgn
vnoremap gy y/\V\C<C-r>"<CR>:set hls<CR>cgn
" Case insensitive
nnoremap gY yiw/\V\c<C-r>"<CR><C-o>:set hls<CR>cgn
vnoremap gY y/\V\c<C-r>"<CR>:set hls<CR>cgn

" Go substitute
vnoremap gs y:set hls<CR>/<C-r>"<CR>:%s/<C-r>"//g<Left><Left>
" Go substitute word
nnoremap gs :set hls<CR>yiw/\<<C-r>"\><CR>:%s/\<<C-r>"\>//g<Left><Left>
" Go count occurances
noremap gC m`:%s///gn<CR>``
" Go find from clipboard
noremap gB /<C-r>*<CR>:set hls<CR>:echo "Search from clipboard for: ".@/<CR>
" Go find from yank register
noremap g/ /\V<C-r>"<CR>:set hls<CR>:echo "Search from yank for: ".@/<CR>

" ===== Swaping =====
" Source http://vim.wikia.com/wiki/Swapping_characters,_words_and_lines
" Push current word after next one
nnoremap <silent> gp "_yiw:s/\(\%#\w\+\)\(\_W\+\)\(\w\+\)/\3\2\1/<CR><c-o>/\w\+\_W\+<CR>:nohls<CR>
" Push current word with previous
nnoremap <silent> gP "_yiw?\w\+\_W\+\%#<CR>:s/\(\%#\w\+\)\(\_W\+\)\(\w\+\)/\3\2\1/<CR><c-o>:nohls<CR>
" Push current paragraph after next one
nnoremap g} {dap}Pj
" Push current paragraph before previous one
nnoremap g{ {{dap}P{j

nnoremap gV `[v`]

" ===== Moving =====
nnoremap g; :action JumpToLastChange<CR>
 
" ===== Navigation =====
nnoremap <c-o> :action Back<CR>
nnoremap <c-i> :action Forward<CR>
nnoremap ]e :action GotoNextError<CR>
nnoremap [e :action GotoPreviousError<CR>
nnoremap g<c-o> <c-o>
nnoremap g<c-i> <c-i>

" ===== Source =====
nnoremap gcc :action CommentByLineComment<CR>
vnoremap gc :action CommentByLineComment<CR>

" ===== Unimpaired functionality =====
nnoremap ]b gt
nnoremap [b gT
nnoremap [<space> O<esc>j
nnoremap ]<space> o<esc>k
nnoremap [q :action PreviousOccurence<CR>
nnoremap ]q :action NextOccurence<CR>
nnoremap [m :action MethodUp<CR>
nnoremap ]m :action MethodDown<CR>
nnoremap [c :action VcsShowPrevChangeMarker<CR>
nnoremap ]c :action VcsShowNextChangeMarker<CR>
nnoremap coh :nohlsearch<CR>
nnoremap col :action EditorToggleShowWhitespaces<CR>
nnoremap cor :set<space>relativenumber!<CR>
nnoremap cow :action EditorToggleUseSoftWraps<CR>

" ===== Windows =====
nnoremap ,s :action SplitHorizontally<CR>
nnoremap ,v :action SplitVertically<CR>
nnoremap ,q :action CloseContent<CR>

